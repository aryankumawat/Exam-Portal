{% extends "base.html" %}
{% load static %}

{% block title %}Student Dashboard - Exam Portal{% endblock %}

{% block extra_css %}
    <style>
    .dashboard-gradient {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .card-modern {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
    }
    
    .card-modern:hover {
        transform: translateY(-5px);
        box-shadow: 0 35px 70px rgba(0, 0, 0, 0.15);
    }
    
    .feature-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        transition: all 0.3s ease;
    }
    
    .feature-card:hover {
        transform: translateY(-10px) scale(1.02);
        box-shadow: 0 25px 50px rgba(102, 126, 234, 0.3);
    }
    
    .stats-card {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
    }
    
    .progress-card {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        color: white;
    }
    
    .achievement-card {
        background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        color: white;
    }
    
    .floating-animation {
        animation: float 6s ease-in-out infinite;
    }
    
    @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
    }
    
    .pulse-animation {
        animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.8; }
    }
    
    .slide-in {
        animation: slideIn 0.8s ease-out;
    }
    
    @keyframes slideIn {
        from { transform: translateY(30px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }
    
    .progress-ring {
        transform: rotate(-90deg);
    }
    
    .progress-ring-circle {
        stroke-dasharray: 251.2;
        stroke-dashoffset: 251.2;
        transition: stroke-dashoffset 0.5s ease-in-out;
    }
    </style>
{% endblock %}

{% block body %}
<div class="min-h-screen dashboard-gradient">
    <!-- Header -->
    <div class="bg-white/10 backdrop-blur-md border-b border-white/20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center">
                        <i class="fas fa-graduation-cap text-white text-xl"></i>
                    </div>
                    <h1 class="text-2xl font-bold text-white ml-3">Student Dashboard</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="text-white">
                        <p class="text-sm opacity-80">Welcome back,</p>
                        <p class="font-semibold">{{ user.username }}</p>
                    </div>
                    <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-white"></i>
                    </div>
                    <a href="{% url 'logout' %}" class="text-white hover:text-gray-200 transition-colors">
                        <i class="fas fa-sign-out-alt text-xl"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Messages -->
    {% if messages %}
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} p-4 rounded-lg mb-4 {% if message.tags == 'error' %}bg-red-100 text-red-700 border border-red-200{% else %}bg-green-100 text-green-700 border border-green-200{% endif %}">
                    <div class="flex items-center">
                        <i class="fas fa-{% if message.tags == 'error' %}exclamation-circle{% else %}check-circle{% endif %} mr-2"></i>
                        {{ message }}
                    </div>
	</div>
            {% endfor %}
        </div>
    {% endif %}

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Stats Overview -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="stats-card rounded-2xl p-6 slide-in">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-white/80 text-sm">Total Exams</p>
                        <p class="text-3xl font-bold">12</p>
                    </div>
                    <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
                        <i class="fas fa-file-alt text-2xl"></i>
                    </div>
                </div>
            </div>
            
            <div class="progress-card rounded-2xl p-6 slide-in">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-white/80 text-sm">Completed</p>
                        <p class="text-3xl font-bold">8</p>
                    </div>
                    <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
                        <i class="fas fa-check-circle text-2xl"></i>
                    </div>
                </div>
            </div>
            
            <div class="achievement-card rounded-2xl p-6 slide-in">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-white/80 text-sm">Average Score</p>
                        <p class="text-3xl font-bold">85%</p>
                    </div>
                    <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
                        <i class="fas fa-trophy text-2xl"></i>
                    </div>
                </div>
            </div>
            
            <div class="bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl p-6 slide-in text-white">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-white/80 text-sm">Rank</p>
                        <p class="text-3xl font-bold">#15</p>
                    </div>
                    <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
                        <i class="fas fa-medal text-2xl"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Dashboard Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Column - Main Features -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Quick Actions -->
                <div class="card-modern rounded-2xl p-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Quick Actions</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <a href="{% url 'view_exams_student' %}" class="feature-card rounded-xl p-6 block hover:shadow-lg transition-all duration-300 hover:scale-105">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-white/30 rounded-xl flex items-center justify-center mr-4">
                                    <i class="fas fa-calendar-alt text-2xl text-white"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-white">Upcoming Exams</h3>
                                    <p class="text-white/90 text-sm">View your scheduled examinations</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm font-bold text-white">4 exams scheduled</span>
                                <i class="fas fa-arrow-right text-white"></i>
                            </div>
                        </a>
                        
                        <a href="{% url 'student-previous' %}" class="bg-gradient-to-r from-green-500 to-teal-500 rounded-xl p-6 block text-white hover:shadow-lg transition-all duration-300 hover:scale-105">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-white/30 rounded-xl flex items-center justify-center mr-4">
                                    <i class="fas fa-chart-line text-2xl text-white"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-white">Results & Attendance</h3>
                                    <p class="text-white/90 text-sm">Track your performance</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm font-bold text-white">View detailed reports</span>
                                <i class="fas fa-arrow-right text-white"></i>
                            </div>
                        </a>
                        
                        <a href="{% url 'email-student-pref' %}" class="bg-gradient-to-r from-green-500 to-teal-500 rounded-xl p-6 block text-white hover:shadow-lg transition-all duration-300 hover:scale-105">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-white/30 rounded-xl flex items-center justify-center mr-4">
                                    <i class="fas fa-cog text-2xl text-white"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-white">Account Settings</h3>
                                    <p class="text-white/90 text-sm">Manage your preferences</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm font-bold text-white">Customize experience</span>
                                <i class="fas fa-arrow-right text-white"></i>
                            </div>
                        </a>
                        
                        <a href="#" class="bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl p-6 block text-white hover:shadow-lg transition-all duration-300 hover:scale-105">
                            <div class="flex items-center mb-4">
                                <div class="w-12 h-12 bg-white/30 rounded-xl flex items-center justify-center mr-4">
                                    <i class="fas fa-book text-2xl text-white"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-white">Study Materials</h3>
                                    <p class="text-white/90 text-sm">Access learning resources</p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm font-bold text-white">12 resources available</span>
                                <i class="fas fa-arrow-right text-white"></i>
        </div>
      </a>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="card-modern rounded-2xl p-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Recent Activity</h2>
                    <div class="space-y-4">
                        <div class="flex items-center p-4 bg-blue-50 rounded-xl">
                            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center mr-4">
                                <i class="fas fa-check text-white"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium text-gray-800">Completed Mathematics Exam</p>
                                <p class="text-sm text-gray-600">Score: 92% • 2 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center p-4 bg-green-50 rounded-xl">
                            <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center mr-4">
                                <i class="fas fa-calendar text-white"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium text-gray-800">Physics Exam Scheduled</p>
                                <p class="text-sm text-gray-600">Tomorrow at 10:00 AM</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center p-4 bg-purple-50 rounded-xl">
                            <div class="w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center mr-4">
                                <i class="fas fa-trophy text-white"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium text-gray-800">Achievement Unlocked</p>
                                <p class="text-sm text-gray-600">Perfect Score in Chemistry</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center p-4 bg-orange-50 rounded-xl">
                            <div class="w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center mr-4">
                                <i class="fas fa-book text-white"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium text-gray-800">Study Material Downloaded</p>
                                <p class="text-sm text-gray-600">Physics Chapter 5 • 1 day ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center p-4 bg-red-50 rounded-xl">
                            <div class="w-10 h-10 bg-red-500 rounded-full flex items-center justify-center mr-4">
                                <i class="fas fa-bell text-white"></i>
                            </div>
                            <div class="flex-1">
                                <p class="font-medium text-gray-800">New Announcement</p>
                                <p class="text-sm text-gray-600">Exam schedule updated • 2 days ago</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Announcements -->
                <div class="card-modern rounded-2xl p-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Announcements</h2>
                    <div class="space-y-4">
                        <div class="p-4 bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl border-l-4 border-blue-500">
                            <div class="flex items-start">
                                <i class="fas fa-bullhorn text-blue-500 mt-1 mr-3"></i>
                                <div>
                                    <h3 class="font-semibold text-gray-800">Midterm Exam Schedule</h3>
                                    <p class="text-sm text-gray-600 mt-1">All midterm exams will be conducted from March 15-20. Please check your individual schedules.</p>
                                    <p class="text-xs text-gray-500 mt-2">Posted 2 days ago</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="p-4 bg-gradient-to-r from-green-50 to-green-100 rounded-xl border-l-4 border-green-500">
                            <div class="flex items-start">
                                <i class="fas fa-info-circle text-green-500 mt-1 mr-3"></i>
                                <div>
                                    <h3 class="font-semibold text-gray-800">New Study Materials Available</h3>
                                    <p class="text-sm text-gray-600 mt-1">Additional practice questions and video tutorials have been uploaded for Physics and Chemistry.</p>
                                    <p class="text-xs text-gray-500 mt-2">Posted 1 week ago</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="p-4 bg-gradient-to-r from-yellow-50 to-yellow-100 rounded-xl border-l-4 border-yellow-500">
                            <div class="flex items-start">
                                <i class="fas fa-exclamation-triangle text-yellow-500 mt-1 mr-3"></i>
                                <div>
                                    <h3 class="font-semibold text-gray-800">System Maintenance</h3>
                                    <p class="text-sm text-gray-600 mt-1">The platform will be under maintenance on Sunday, March 10th from 2:00 AM to 4:00 AM.</p>
                                    <p class="text-xs text-gray-500 mt-2">Posted 3 days ago</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Practice Tests -->
                <div class="card-modern rounded-2xl p-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Practice Tests</h2>
                    <div class="space-y-4">
                        <div class="p-4 bg-gradient-to-r from-purple-50 to-purple-100 rounded-xl">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-flask text-purple-500 mr-3"></i>
                                    <div>
                                        <h3 class="font-semibold text-gray-800">Chemistry Practice Test</h3>
                                        <p class="text-sm text-gray-600">50 questions • 60 minutes</p>
                                    </div>
                                </div>
                                <button class="px-4 py-2 bg-purple-500 text-white rounded-lg text-sm font-medium hover:bg-purple-600 transition-colors">
                                    Start Test
                                </button>
                            </div>
                        </div>
                        
                        <div class="p-4 bg-gradient-to-r from-indigo-50 to-indigo-100 rounded-xl">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-calculator text-indigo-500 mr-3"></i>
                                    <div>
                                        <h3 class="font-semibold text-gray-800">Mathematics Quiz</h3>
                                        <p class="text-sm text-gray-600">30 questions • 45 minutes</p>
                                    </div>
                                </div>
                                <button class="px-4 py-2 bg-indigo-500 text-white rounded-lg text-sm font-medium hover:bg-indigo-600 transition-colors">
                                    Start Test
                                </button>
                            </div>
                        </div>
                        
                        <div class="p-4 bg-gradient-to-r from-teal-50 to-teal-100 rounded-xl">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-atom text-teal-500 mr-3"></i>
                                    <div>
                                        <h3 class="font-semibold text-gray-800">Physics Mock Exam</h3>
                                        <p class="text-sm text-gray-600">75 questions • 90 minutes</p>
                                    </div>
                                </div>
                                <button class="px-4 py-2 bg-teal-500 text-white rounded-lg text-sm font-medium hover:bg-teal-600 transition-colors">
                                    Start Test
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column - Sidebar -->
            <div class="space-y-8">
                <!-- Progress Overview -->
                <div class="card-modern rounded-2xl p-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Progress Overview</h2>
                    <div class="text-center">
                        <div class="relative w-32 h-32 mx-auto mb-4">
                            <svg class="progress-ring w-32 h-32" width="128" height="128">
                                <circle class="progress-ring-circle" stroke="#e5e7eb" stroke-width="8" fill="transparent" r="40" cx="64" cy="64"/>
                                <circle class="progress-ring-circle" stroke="#667eea" stroke-width="8" fill="transparent" r="40" cx="64" cy="64" style="stroke-dashoffset: 75.36;"/>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span class="text-2xl font-bold text-gray-800">70%</span>
                            </div>
                        </div>
                        <p class="text-gray-600">Overall Progress</p>
                    </div>
                </div>

                <!-- Upcoming Deadlines -->
                <div class="card-modern rounded-2xl p-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Upcoming Deadlines</h2>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-3 bg-red-50 rounded-lg">
                            <div>
                                <p class="font-medium text-gray-800">Physics Exam</p>
                                <p class="text-sm text-gray-600">Tomorrow, 10:00 AM</p>
                            </div>
                            <span class="px-2 py-1 bg-red-500 text-white text-xs rounded-full">Urgent</span>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg">
                            <div>
                                <p class="font-medium text-gray-800">Chemistry Assignment</p>
                                <p class="text-sm text-gray-600">In 3 days</p>
                            </div>
                            <span class="px-2 py-1 bg-yellow-500 text-white text-xs rounded-full">Due Soon</span>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
                            <div>
                                <p class="font-medium text-gray-800">Mathematics Quiz</p>
                                <p class="text-sm text-gray-600">Next week</p>
                            </div>
                            <span class="px-2 py-1 bg-blue-500 text-white text-xs rounded-full">Scheduled</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="card-modern rounded-2xl p-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Quick Stats</h2>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Study Streak</span>
                            <span class="font-bold text-blue-600">7 days</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Time Spent</span>
                            <span class="font-bold text-green-600">24h 30m</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Questions Answered</span>
                            <span class="font-bold text-purple-600">1,247</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">Accuracy Rate</span>
                            <span class="font-bold text-orange-600">87%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Add interactive animations
document.addEventListener('DOMContentLoaded', function() {
    // Animate progress ring
    const progressRing = document.querySelector('.progress-ring-circle');
    const progressValue = 70; // This should come from your backend
    const circumference = 2 * Math.PI * 40;
    const offset = circumference - (progressValue / 100) * circumference;
    
    setTimeout(() => {
        progressRing.style.strokeDashoffset = offset;
    }, 500);
    
    // Add hover effects to cards
    const cards = document.querySelectorAll('.feature-card, .card-modern');
    cards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px) scale(1.02)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
    });
    
    // Add click animations
    const links = document.querySelectorAll('a[href]');
    links.forEach(link => {
        link.addEventListener('click', function(e) {
            // Add a subtle click animation
            this.style.transform = 'scale(0.98)';
            setTimeout(() => {
                this.style.transform = 'scale(1)';
            }, 150);
        });
    });
});
</script>
  {% endblock %}